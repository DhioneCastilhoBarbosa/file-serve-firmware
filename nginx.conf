server {
    listen 80;
    server_name _;

    # Listagem do diretório de firmware
    location /firmware/ {
        root /usr/share/nginx/html;
        autoindex on;                  
        autoindex_exact_size off;
        autoindex_localtime on;
    }

    # .hex -> exibir no navegador (inline)
    location ~* ^/firmware/.*\.hex$ {
        root /usr/share/nginx/html;
        types { text/plain hex; }
        default_type text/plain;
        add_header Content-Disposition "inline";
        add_header Access-Control-Allow-Origin "*" always;
    }

    # .bin -> forçar download
    location ~* ^/firmware/.*\.bin$ {
        root /usr/share/nginx/html;
        types { application/octet-stream bin; }
        default_type application/octet-stream;
        add_header Content-Disposition "attachment";
        add_header Access-Control-Allow-Origin "*" always;
    }
}
